{"version":3,"sources":["../../../app/router/page/articles.js"],"names":[],"mappings":";;;;;;;;;;;;;AAQA,IAAI,UAAU,QAAQ,SAAR,CAAd;AACA,IAAI,SAAS,QAAQ,MAAR,EAAb;AACA,IAAI,KAAK,QAAQ,IAAR,CAAT;AACA,IAAI,OAAO,QAAQ,MAAR,CAAX;AACA,IAAI,WAAW,QAAQ,aAAR,CAAf;;AAEA,SAAS,UAAT,CAAoB,KAApB,EAA2B,OAA3B,EAAoC;AAClC,uJAKQ,OALR;AAkBD;;kBAEc,eAAO;AACpB,MAAI,KAAJ,CAAU,cAAV,EAA0B,UAAC,GAAD,EAAM,GAAN,EAAW,IAAX,EAAiB,IAAjB,EAA0B;AAClD,YAAQ,GAAR,CAAY,IAAZ;AACA,QAAI,iBAAJ;AAAA,QAAc,gBAAd;AAAA,QAAuB,aAAvB;AACA,eAAW,KAAK,IAAL,CAAU,SAAV,EAAqB,WAArB,wBAAsD,IAAtD,SAAX;AACA,QAAI;AACF,gBAAU,GAAG,YAAH,CAAgB,QAAhB,EAA0B,MAA1B,CAAV;AACD,KAFD,CAEE,OAAO,CAAP,EAAU;AACV,gBAAU,yCAAV;AACD;AACD,WAAO,SAAS,QAAT,CAAkB,OAAlB,CAAP;;AAEA,QAAI,IAAJ,CAAS,WAAW,IAAX,EAAiB,IAAjB,CAAT;AACA;AACD,GAbD;;AAeA,MAAI,GAAJ,CAAQ,mCAAR,EAA6C,UAAC,GAAD,EAAM,GAAN,EAAc;AACzD,QAAI,GAAJ;AACD,GAFD;AAGD,C","file":"articles.js","sourcesContent":["/**\n* @Author: woolson\n* @Date:   2016-11-26 17:11:00\n* @Email:  woolson.lee@gmail.com\n* @Last modified by:   woolson\n* @Last modified time: 2016-11-30 00:11:24\n*/\n\nvar express = require(\"express\")\nvar router = express.Router()\nvar fs = require(\"fs\")\nvar path = require(\"path\")\nvar markdown = require(\"markdown-js\")\n\nfunction formatHTML(title, content) {\n  return `\n      <div id=\"content\">\n        <a id=\"common-back\">\n          <i class=\"fa fa-arrow-circle-left\"></i>\n        </a>\n        ${content}\n        <div id=\"disqus_thread\"></div>\n      </div>\n      <script>\n        (function() { // DON'T EDIT BELOW THIS LINE\n          var d = document, s = d.createElement('script');\n          s.src = '//woolsonlee.disqus.com/embed.js';\n          s.setAttribute('data-timestamp', +new Date());\n          (d.head || d.body).appendChild(s);\n        })();\n      </script>\n      <noscript>Please enable JavaScript to view the <a href=\"https://disqus.com/?ref_noscript\">comments powered by Disqus.</a></noscript>\n  `\n}\n\nexport default app => {\n  app.param(\"article_name\", (req, res, next, name) => {\n    console.log(name)\n    let filePath, content, html\n    filePath = path.join(__dirname, \"../../../\", `/static/articles/${name}.md`)\n    try {\n      content = fs.readFileSync(filePath, \"utf8\")\n    } catch (e) {\n      content = \"Author had removed this article, Sorry!\"\n    }\n    html = markdown.makeHtml(content)\n\n    res.send(formatHTML(name, html))\n    next()\n  })\n\n  app.get(\"/study/fetchArticle/:article_name\", (req, res) => {\n    res.end()\n  })\n}\n"]}